<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Expressions - JSON-e</title>


        <!-- Custom HTML head -->
        <script async type="text/javascript" src="https://cdn.jsdelivr.net/npm/js-yaml@4.1.0"></script>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="docs/jsone.css">

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- JSON-e: add logo -->
            <div class="json-e-logo">
                <img src="logo-white.png" width="128" height="128" alt="JSON-e Logo" />
            </div>
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="using.html"><strong aria-hidden="true">2.</strong> Using JSON-e</a></li><li class="chapter-item expanded "><a href="language.html"><strong aria-hidden="true">3.</strong> Language Reference</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="simple.html"><strong aria-hidden="true">3.1.</strong> Simple Usage</a></li><li class="chapter-item expanded "><a href="operators.html"><strong aria-hidden="true">3.2.</strong> Operators</a></li><li class="chapter-item expanded "><a href="expressions.html" class="active"><strong aria-hidden="true">3.3.</strong> Expressions</a></li><li class="chapter-item expanded "><a href="built-ins.html"><strong aria-hidden="true">3.4.</strong> Built-Ins</a></li></ol></li><li class="chapter-item expanded "><a href="playground.html"><strong aria-hidden="true">4.</strong> Playground</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">JSON-e</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/json-e/json-e" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/json-e/json-e/edit/main/docs/src/expressions.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="expressions"><a class="header" href="#expressions">Expressions</a></h1>
<p>Expression are given in a simple Python- or JavaScript-like expression
language. Its data types are limited to JSON types plus function objects.</p>
<h2 id="literals"><a class="header" href="#literals">Literals</a></h2>
<p>Literals are similar to those for JSON Numeric literals, but only accept integer and
decimal notation.</p>
<pre><code class="language-yaml json-e">template:
  - {$eval: &quot;1.3&quot;}
context: {}
result:
  - 1.3
</code></pre>
<p>Strings do not support any kind of escaping, but can be enclosed in either <code>&quot;</code>
or in <code>'</code>. To avoid confusion when writing JSON-e expressions in YAML or JSON
documents, remember that JSON-e operates on the data structure that results
<em>after</em> YAML or JSON parsing is complete.</p>
<pre><code class="language-yaml json-e">template:
  - {$eval: &quot;'abc'&quot;}
  - {$eval: '&quot;abc&quot;'}
context: {}
result:
  - &quot;abc&quot;
  - &quot;abc&quot;
</code></pre>
<p>Array and object literals also look much like JSON, with bare identifiers
allowed as keys like in Javascript:</p>
<pre><code class="language-yaml json-e">template:
  - {$eval: '[1, 2, &quot;three&quot;]'}
  - {$eval: '{foo: 1, &quot;bar&quot;: 2}'}
context: {}
result:
  - [1, 2, &quot;three&quot;]
  - {&quot;foo&quot;: 1, &quot;bar&quot;: 2}
</code></pre>
<h2 id="context-references"><a class="header" href="#context-references">Context References</a></h2>
<p>Bare identifiers refer to items from the context or to built-ins (described below).</p>
<pre><code class="language-yaml json-e">template: {$eval: '[x, z, x+z]'}
context: {x: 'quick', z: 'sort'}
result: ['quick', 'sort', 'quicksort']
</code></pre>
<p>Valid identifiers for context references follow the requirements of many
programming languages: identifiers may only contain letters, underscores, and
numbers, but may not start with a number. This does imply that the context
object may only have keys that meet these requirements.</p>
<h2 id="arithmetic-operations"><a class="header" href="#arithmetic-operations">Arithmetic Operations</a></h2>
<p>The usual arithmetic operators are all defined, with typical associativity and
precedence:</p>
<pre><code class="language-yaml json-e">template:
  - {$eval: 'x + z'}
  - {$eval: 's + t'}
  - {$eval: 'z - x'}
  - {$eval: 'x * z'}
  - {$eval: 'z / x'}
  - {$eval: 'z ** 2'}
  - {$eval: '(z / x) ** 2'}
context: {x: 10, z: 20, s: &quot;face&quot;, t: &quot;plant&quot;}
result:
  - 30
  - &quot;faceplant&quot;
  - 10
  - 200
  - 2
  - 400
  - 4
</code></pre>
<p>Note that strings can be concatenated with <code>+</code>, but none of the other operators
apply.</p>
<h2 id="comparison-operations"><a class="header" href="#comparison-operations">Comparison Operations</a></h2>
<p>Comparisons work as expected.  Equality is &quot;deep&quot; in the sense of doing
comparisons of the contents of data structures.</p>
<pre><code class="language-yaml json-e">template:
  - {$eval: 'x &lt; z'}
  - {$eval: 'x &lt;= z'}
  - {$eval: 'x &gt; z'}
  - {$eval: 'x &gt;= z'}
  - {$eval: 'deep == [1, [3, {a: 5}]]'}
  - {$eval: 'deep != [1, [3, {a: 5}]]'}
context: {x: -10, z: 10, deep: [1, [3, {a: 5}]]}
result: [true, true, false, false, true, false]
</code></pre>
<h2 id="boolean-operations"><a class="header" href="#boolean-operations">Boolean Operations</a></h2>
<p>Boolean operations use C- and Javascript-style symbols <code>||</code>, <code>&amp;&amp;</code>, and <code>!</code>:</p>
<pre><code class="language-yaml json-e">template: {$eval: '!(false || false) &amp;&amp; true'}
context: {}
result: true
</code></pre>
<p>Json-e supports short-circuit evaluation, so if in <code>||</code> left operand is true 
returning value will be true no matter what right operand is:</p>
<pre><code class="language-yaml json-e">template: {$eval: &quot;true || b&quot;}
context: {}
result: true
</code></pre>
<p>And if in <code>&amp;&amp;</code> left operand is false returning value will be false no matter 
what right operand is:</p>
<pre><code class="language-yaml json-e">template: {$eval: &quot;false &amp;&amp; b&quot;}
context: {}
result: false
</code></pre>
<h2 id="object-property-access"><a class="header" href="#object-property-access">Object Property Access</a></h2>
<p>Like Javascript, object properties can be accessed either with array-index
syntax or with dot syntax. Unlike Javascript, <code>obj.prop</code> is an error if <code>obj</code>
does not have <code>prop</code>, while <code>obj['prop']</code> will evaluate to <code>null</code>.</p>
<pre><code class="language-yaml json-e">template: {$eval: 'v.a + v[&quot;b&quot;]'}
context: {v: {a: 'apple', b: 'banana', c: 'carrot'}}
result: 'applebanana'
</code></pre>
<p>Note that the object can be a literal expression:</p>
<pre><code class="language-yaml json-e">template: {$eval: '{ENOMEM:&quot;Out of memory&quot;, ENOCPU:&quot;Out of CPUs&quot;}[msgid]'}
context: {msgid: ENOMEM}
result: 'Out of memory'
</code></pre>
<p>When using the dot-syntax, e.g. <code>.prop</code>, identifiers may only contain letters,
underscores, and numbers, but may not start with a number (just like for context
references). While the context object may only have keys that meet these
requirements, nested objects may have keys in any format. Keys that are not in
the identifier format must be accessed using the bracket-name syntax, e.g.
<code>['my-prop']</code>.</p>
<h2 id="indexing-and-slicing"><a class="header" href="#indexing-and-slicing">Indexing and Slicing</a></h2>
<p>Strings and arrays can be indexed and sliced using a Python-like indexing
scheme.  Negative indexes are counted from the end of the value.  Slices are
treated as &quot;half-open&quot;, meaning that the result contains the first index and
does not contain the second index.  A &quot;backward&quot; slice with the start index
greater than the end index is treated as empty.</p>
<p>Strings are treated as a sequence of Unicode codepoints.</p>
<pre><code class="language-yaml json-e">template:
  - {$eval: '[array[1], string[1]]'}
  - {$eval: '[array[1:4], string[1:4]]'}
  - {$eval: '[array[2:], string[2:]]'}
  - {$eval: '[array[:2], string[:2]]'}
  - {$eval: '[array[4:2], string[4:2]]'}
  - {$eval: '[array[-2], string[-2]]'}
  - {$eval: '[array[-2:], string[-2:]]'}
  - {$eval: '[array[:-3], string[:-3]]'}
context: {array: ['a', 'b', '☪', 'd', 'e'], string: 'ab☪de'}
result:
  - ['b', 'b']
  - [['b', '☪', 'd'], 'b☪d']
  - [['☪', 'd', 'e'], '☪de']
  - [['a', 'b'], 'ab']
  - [[], '']
  - ['d', 'd']
  - [['d', 'e'], 'de']
  - [['a', 'b'], 'ab']
</code></pre>
<h2 id="containment-operation"><a class="header" href="#containment-operation">Containment Operation</a></h2>
<p>The <code>in</code> keyword can be used to check for containment: a property in an object,
an element in an array, or a substring in a string.</p>
<pre><code class="language-yaml json-e">template:
  - {$eval: '&quot;foo&quot; in {foo: 1, bar: 2}'}
  - {$eval: '&quot;foo&quot; in [&quot;foo&quot;, &quot;bar&quot;]'}
  - {$eval: '&quot;foo&quot; in &quot;foobar&quot;'}
context: {}
result: [true, true, true]
</code></pre>
<h2 id="function-invocation"><a class="header" href="#function-invocation">Function Invocation</a></h2>
<p>Function calls are made with the usual <code>fn(arg1, arg2)</code> syntax. Functions are
not JSON data, so they cannot be created in JSON-e, but they can be provided as
built-ins or supplied in the context and called from JSON-e.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="operators.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="built-ins.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="operators.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="built-ins.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="docs/jsone.js"></script>
        <script type="text/javascript" src="js/dist/index.js"></script>


    </body>
</html>
