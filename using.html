<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Using JSON-e - JSON-e</title>


        <!-- Custom HTML head -->
        <script async type="text/javascript" src="https://cdn.jsdelivr.net/npm/js-yaml@4.1.0"></script>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="docs/jsone.css">

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- JSON-e: add logo -->
            <div class="json-e-logo">
                <img src="logo-white.png" width="128" height="128" alt="JSON-e Logo" />
            </div>
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="using.html" class="active"><strong aria-hidden="true">2.</strong> Using JSON-e</a></li><li class="chapter-item expanded "><a href="language.html"><strong aria-hidden="true">3.</strong> Language Reference</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="simple.html"><strong aria-hidden="true">3.1.</strong> Simple Usage</a></li><li class="chapter-item expanded "><a href="operators.html"><strong aria-hidden="true">3.2.</strong> Operators</a></li><li class="chapter-item expanded "><a href="expressions.html"><strong aria-hidden="true">3.3.</strong> Expressions</a></li><li class="chapter-item expanded "><a href="built-ins.html"><strong aria-hidden="true">3.4.</strong> Built-Ins</a></li></ol></li><li class="chapter-item expanded "><a href="playground.html"><strong aria-hidden="true">4.</strong> Playground</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">JSON-e</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/json-e/json-e" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/json-e/json-e/edit/main/docs/src/using.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="using-json-e"><a class="header" href="#using-json-e">Using JSON-e</a></h1>
<p>An application of JSON-e typically allows the user to specify the template, and
defines the context with which that template will be rendered as well as how
the output will be interpreted. For example, an application that allows
customized responses to chat messages might provide context <code>{&quot;message&quot;: .., &quot;sender&quot;: ..}</code> and expect an object of the form <code>{&quot;reply&quot;: ..}</code> as a result.</p>
<p>JSON-e is intended for cross-platform usage, and has native implementations in several languages.</p>
<h2 id="javascript"><a class="header" href="#javascript">JavaScript</a></h2>
<p>The JS module is installed into a Node project with</p>
<pre><code class="language-shell">npm install --save json-e
yarn add json-e
</code></pre>
<p>The module exposes following interface:</p>
<pre><code class="language-javascript">import jsone from 'json-e';

var template = {a: {$eval: &quot;foo.bar&quot;}};
var context = {foo: {bar: &quot;zoo&quot;}};
console.log(jsone(template, context));
// -&gt; { a: 'zoo' }
</code></pre>
<p>Note that the context can contain functions, and those functions can be called
from the template:</p>
<pre><code class="language-javascript">var template = {$eval: &quot;foo(1)&quot;};
var context = {&quot;foo&quot;: function(x) { return x + 2; }};
console.log(jsone(template, context));  // -&gt; 3
</code></pre>
<p><em>NOTE</em>: Context functions are called synchronously. Any complex asynchronous
operations should be handled before rendering the template.</p>
<p><em>NOTE</em>: If the template is untrusted, it can pass arbitrary data to functions
in the context, which must guard against such behavior.</p>
<h3 id="browser"><a class="header" href="#browser">Browser</a></h3>
<p>JSON-e has a single-file, browser-compatible implementation in <code>dist/index.js</code> in the NPM release.
This file can be used directly in a browser to add JSON-e functionality.</p>
<p>JSON-e can be used from a CDN with</p>
<pre><code class="language-html">&lt;script
  type=&quot;text/javascript&quot;
  src=&quot;https://cdn.jsdelivr.net/npm/json-e&quot;&gt;
&lt;/script&gt;
</code></pre>
<h2 id="typescript"><a class="header" href="#typescript">TypeScript</a></h2>
<p>The JS module is installed with either of</p>
<pre><code class="language-shell">npm install --save json-e
yarn add json-e
</code></pre>
<p>Note: Type definitions are included with this package, so there's no need of seperate
<code>@types/..</code> installation.</p>
<p>As 'json-e' is a CommonJS module, the package must be imported like this <a href="https://www.typescriptlang.org/docs/handbook/modules.html#export--and-import--require">(more..)</a> for type definitions to work properly:</p>
<pre><code class="language-typescript">const jsone = require('json-e');

var template = {a: {$eval: &quot;foo.bar&quot;}};
var context = {foo: {bar: &quot;zoo&quot;}};
console.log(jsone(template, context));
// -&gt; { a: 'zoo' }
</code></pre>
<h2 id="python"><a class="header" href="#python">Python</a></h2>
<p>The Python distribution is installed with</p>
<pre><code class="language-shell">pip install json-e
</code></pre>
<p>The distribution exposes a <code>render</code> function:</p>
<pre><code class="language-python">import jsone

template = {&quot;a&quot;: {&quot;$eval&quot;: &quot;foo.bar&quot;}}
context = {&quot;foo&quot;: {&quot;bar&quot;: &quot;zoo&quot;}}
print(jsone.render(template, context))  # -&gt; {&quot;a&quot;: &quot;zoo&quot;}
</code></pre>
<p>and also allows custom functions in the context:</p>
<pre><code class="language-python">template = {&quot;$eval&quot;: &quot;foo(1)&quot;}
context = {&quot;foo&quot;: lambda x: x + 2}
print(jsone.render(template, context))  # -&gt; 3
</code></pre>
<h2 id="go-golang"><a class="header" href="#go-golang">Go (golang)</a></h2>
<p>The <a href="https://pkg.go.dev/github.com/json-e/json-e">golang package for json-e</a> exposes a <code>Render</code> function:</p>
<pre><code class="language-golang">import (
  &quot;fmt&quot;
  &quot;github.com/json-e/json-e&quot;
)

// Template must be given using types:
//   map[string]interface{}, []interface{}, float64, string, bool, nil
// The same types that json.Unmarshal() will create when targeting an interface{}
template := map[string]interface{}{
  &quot;result&quot;: map[string]interface{}{
    &quot;$eval&quot;: &quot;f() + 5&quot;,
  },
}
// Context can be JSON types just like template, but may also contain functions
// these can JSON types as arguments, and return a value and optionally an error.
context := map[string]interface{}{
  &quot;f&quot;: func() int { return 37 },
}

func main() {
  value, err := jsone.Render(template, context)
  fmt.Printf(&quot;%#v\n&quot;, value)
}
</code></pre>
<h2 id="rust"><a class="header" href="#rust">Rust</a></h2>
<p>The Rust crate exposes a <code>render</code> function which takes the template and context as <code>serde_json</code> <code>Value</code> objects, and returns an object of the same type.</p>
<pre><code class="language-rust ignore">use serde_json::json;

fn main() {
    println!(&quot;result: {:?}&quot;, json_e::render(
        json!({$eval: &quot;a + b&quot;}),
        json!({a: 10, b: 20})));
}
</code></pre>
<p>See <a href="https://docs.rs/json-e">docs.rs</a> for the full API docs.</p>
<h2 id="third-party-integrations"><a class="header" href="#third-party-integrations">Third-Party Integrations</a></h2>
<h3 id="rjsone"><a class="header" href="#rjsone">rjsone</a></h3>
<p>You can use the 3rd party package <a href="https://wryun.github.io/rjsone/">rjsone</a> to template
JSON-e from the command line, passing templates/contexts as files or arguments and using
stdout for the result.</p>
<h3 id="bazel"><a class="header" href="#bazel">Bazel</a></h3>
<p>You can use 3rd party <a href="https://github.com/atlassian/bazel-tools/tree/master/rjsone">Bazel rule</a> to invoke
rjsone (see above) from Bazel build files.</p>
<h3 id="terraform"><a class="header" href="#terraform">Terraform</a></h3>
<p>The <a href="https://github.com/taskcluster/terraform-provider-jsone">jsone Terraform provider</a> allows use of JSON-e for templating objects within Terraform.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="introduction.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="language.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="introduction.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="language.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="docs/jsone.js"></script>
        <script type="text/javascript" src="js/dist/index.js"></script>


    </body>
</html>
